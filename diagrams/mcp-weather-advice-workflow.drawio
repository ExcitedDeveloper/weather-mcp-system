<mxfile host="app.diagrams.net">
  <diagram name="MCP Weather Advice Workflow" id="mcp-weather-workflow">
    <mxGraphModel dx="1422" dy="762" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="MCP Weather Advice Tool Workflow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="360" height="30" as="geometry" />
        </mxCell>
        
        <!-- Client Layer -->
        <mxCell id="client-container" value="MCP CLIENTS" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="80" width="200" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="claude" value="Claude Desktop&#xa;MCP Inspector&#xa;Custom Apps" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#B3E5FC;strokeColor=#0277BD;" vertex="1" parent="client-container">
          <mxGeometry x="20" y="30" width="160" height="70" as="geometry" />
        </mxCell>
        
        <!-- Server Layer -->
        <mxCell id="server-container" value="MCP SERVER" style="swimlane;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="80" width="300" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="registry" value="Tool Registry&#xa;(schemas.ts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1BEE7;strokeColor=#7B1FA2;" vertex="1" parent="server-container">
          <mxGeometry x="20" y="30" width="120" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="router" value="Request Router&#xa;(index.ts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1BEE7;strokeColor=#7B1FA2;" vertex="1" parent="server-container">
          <mxGeometry x="160" y="30" width="120" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="validator" value="Schema Validation&#xa;(validation.ts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1BEE7;strokeColor=#7B1FA2;" vertex="1" parent="server-container">
          <mxGeometry x="20" y="90" width="120" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="handler" value="Tool Handler&#xa;(tools/index.ts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1BEE7;strokeColor=#7B1FA2;" vertex="1" parent="server-container">
          <mxGeometry x="160" y="90" width="120" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="response-formatter" value="Response&#xa;Formatter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1BEE7;strokeColor=#7B1FA2;" vertex="1" parent="server-container">
          <mxGeometry x="90" y="150" width="120" height="40" as="geometry" />
        </mxCell>
        
        <!-- Advice Engine Layer -->
        <mxCell id="engine-container" value="ADVICE ENGINE" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#EF6C00;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="320" width="600" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="advice-main" value="Advice Generator&#xa;(advice.ts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#EF6C00;" vertex="1" parent="engine-container">
          <mxGeometry x="20" y="30" width="120" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="location-parser" value="Location Parser&#xa;(geocoding.ts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#EF6C00;" vertex="1" parent="engine-container">
          <mxGeometry x="160" y="30" width="120" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="temp-converter" value="Temperature&#xa;Converter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#EF6C00;" vertex="1" parent="engine-container">
          <mxGeometry x="300" y="30" width="120" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="clothing-logic" value="Clothing Logic&#xa;(6 temp ranges)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#EF6C00;" vertex="1" parent="engine-container">
          <mxGeometry x="20" y="110" width="120" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="activity-logic" value="Activity Logic&#xa;(conditions)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#EF6C00;" vertex="1" parent="engine-container">
          <mxGeometry x="160" y="110" width="120" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="warning-logic" value="Warning Logic&#xa;(safety)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#EF6C00;" vertex="1" parent="engine-container">
          <mxGeometry x="300" y="110" width="120" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="format-output" value="Format Output&#xa;(emojis + structure)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#EF6C00;" vertex="1" parent="engine-container">
          <mxGeometry x="460" y="110" width="120" height="50" as="geometry" />
        </mxCell>
        
        <!-- External APIs -->
        <mxCell id="api-container" value="EXTERNAL APIs" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#2E7D32;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="320" width="200" height="150" as="geometry" />
        </mxCell>
        
        <mxCell id="geocoding-api" value="Geocoding API&#xa;(Open-Meteo)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;" vertex="1" parent="api-container">
          <mxGeometry x="40" y="30" width="120" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="weather-api" value="Weather API&#xa;(Open-Meteo)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;" vertex="1" parent="api-container">
          <mxGeometry x="40" y="90" width="120" height="40" as="geometry" />
        </mxCell>
        
        <!-- Temperature Logic Note -->
        <mxCell id="temp-logic" value="TEMPERATURE LOGIC&#xa;&#xa;&lt; 20°F: Heavy winter gear&#xa;20-40°F: Heavy jacket&#xa;40-60°F: Light jacket&#xa;60-75°F: T-shirt, comfortable&#xa;75-85°F: Light clothing&#xa;&gt; 85°F: Minimal clothing&#xa;&#xa;WEATHER CONDITIONS&#xa;Rain → Umbrella, waterproof&#xa;Snow → Boots, traction&#xa;Wind → Wind-resistant&#xa;Thunderstorm → Shelter" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;fillColor=#FFFFCC;strokeColor=#D6B656;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="720" y="80" width="180" height="200" as="geometry" />
        </mxCell>
        
        <!-- Main workflow arrows -->
        <mxCell id="arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="claude" target="registry">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label1" value="1. Tool Call&#xa;JSON-RPC" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow1">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="registry" target="router">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label2" value="2. Route" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow2">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="router" target="validator">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label3" value="3. Validate" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow3">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="validator" target="handler">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label4" value="4. Handle" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow4">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="handler" target="advice-main">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label5" value="5. Generate&#xa;Advice" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow5">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <!-- Advice engine internal flow -->
        <mxCell id="arrow6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="advice-main" target="location-parser">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label6" value="6a. Parse" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow6">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="location-parser" target="geocoding-api">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label7" value="6b. Geocode" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow7">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="location-parser" target="weather-api">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label8" value="6c. Weather" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow8">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="temp-converter" target="clothing-logic">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label9" value="6d. Convert" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow9">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="clothing-logic" target="activity-logic">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="activity-logic" target="warning-logic">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="warning-logic" target="format-output">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="format-output" target="response-formatter">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label13" value="7. Format" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow13">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="response-formatter" target="claude">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label14" value="8. MCP Response" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="arrow14">
          <mxGeometry x="-0.1" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>